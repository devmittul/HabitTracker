"use strict";(self.webpackChunkhabit_tracker=self.webpackChunkhabit_tracker||[]).push([[732],{732:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var s=a(43),c=a(899),l=a(579);const r=()=>{const{habits:e}=(0,c.L)(),[t,a]=(0,s.useState)([]),[r,n]=(0,s.useState)([]),[i,o]=(0,s.useState)(null),[d,h]=(0,s.useState)((()=>{const e=new Date;return"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"))})),m=(()=>{const e=[],t=new Date,a=t.getFullYear(),s=t.getMonth();for(let c=0;c<12;c++){let t=s-c,l=a;t<0&&(t+=12,l-=1);const r="".concat(l,"-").concat(String(t+1).padStart(2,"0")),n=new Date(l,t,1).toLocaleString("default",{month:"long",year:"numeric"});e.push({value:r,label:n})}return e})();(0,s.useEffect)((()=>{if(0===e.length)return;const[t,s]=d.split("-").map(Number),c=new Date(t,s,0).getDate(),l=[];for(let a=1;a<=c;a++){const c="".concat(t,"-").concat(String(s).padStart(2,"0"),"-").concat(String(a).padStart(2,"0")),r=e.filter((e=>{const t=new Date(c),a=t.getDay(),s=t.getDate();switch(e.frequency){case"daily":default:return!0;case"weekly":return a===(e.weeklyDay||1);case"monthly":return s===(e.monthlyDate||1)}})),n=r.filter((e=>e.history.some((e=>e.date===c&&e.completed)))).length,i=r.length>0?Math.round(n/r.length*100):0;l.push({date:c,day:a,activeHabits:r.length,completed:n,percentage:i})}a(l);const r={};e.forEach((e=>{const t=e.category;r[t]||(r[t]={name:t,count:0,completed:0,streakSum:0}),r[t].count++,r[t].streakSum+=e.streak,e.history.forEach((e=>{e.date.startsWith(d)&&e.completed&&r[t].completed++}))})),n(Object.values(r)),!i&&e.length>0&&o(e[0].id)}),[e,d,i]);const g=i?e.find((e=>e.id===i)):null;return(0,l.jsxs)("div",{className:"statistics-container animate-in",children:[(0,l.jsx)("h2",{className:"page-title",children:"Statistics & Analytics"}),(0,l.jsxs)("div",{className:"stats-controls glass-card",children:[(0,l.jsxs)("div",{className:"control-group",children:[(0,l.jsx)("label",{htmlFor:"month-select",children:"Month"}),(0,l.jsx)("select",{id:"month-select",value:d,onChange:e=>h(e.target.value),children:m.map((e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,l.jsxs)("div",{className:"control-group",children:[(0,l.jsx)("label",{htmlFor:"habit-select",children:"Habit"}),(0,l.jsx)("select",{id:"habit-select",value:i||"",onChange:e=>o(Number(e.target.value)),children:e.map((e=>(0,l.jsx)("option",{value:e.id,children:e.title},e.id)))})]})]}),(0,l.jsxs)("div",{className:"stats-grid",children:[(0,l.jsxs)("div",{className:"glass-card stat-card",children:[(0,l.jsx)("h3",{children:"Monthly Overview"}),(0,l.jsx)("div",{className:"calendar-heatmap",children:t.map((e=>(0,l.jsx)("div",{className:"heatmap-day",style:{backgroundColor:e.percentage>0?"rgba(176, 224, 168, ".concat(e.percentage/100,")"):"transparent",border:"1px solid var(--glass-border)"},title:"".concat(e.date,": ").concat(e.percentage,"% completed"),children:e.day},e.date)))})]}),(0,l.jsxs)("div",{className:"glass-card stat-card",children:[(0,l.jsx)("h3",{children:"Categories"}),(0,l.jsx)("div",{className:"categories-stats",children:r.map((e=>(0,l.jsxs)("div",{className:"category-stat",children:[(0,l.jsx)("div",{className:"category-name",children:e.name}),(0,l.jsx)("div",{className:"category-bar",children:(0,l.jsx)("div",{className:"category-progress",style:{width:"".concat(e.completed/(30*e.count)*100,"%"),background:"var(--".concat("health"===e.name.toLowerCase()?"primary-color":"productivity"===e.name.toLowerCase()?"secondary-color":"wellness"===e.name.toLowerCase()?"accent-color":"success-color",")")}})}),(0,l.jsxs)("div",{className:"category-metrics",children:[(0,l.jsxs)("span",{children:[e.count," habits"]}),(0,l.jsxs)("span",{children:["Avg streak: ",Math.round(e.streakSum/e.count)," days"]})]})]},e.name)))})]})]}),g&&(0,l.jsxs)("div",{className:"glass-card habit-stats-card",children:[(0,l.jsxs)("h3",{children:["Habit Insights: ",g.title]}),(0,l.jsxs)("div",{className:"habit-insights",children:[(0,l.jsxs)("div",{className:"insight-item",children:[(0,l.jsx)("h4",{children:"Current Streak"}),(0,l.jsxs)("p",{className:"insight-value",children:[g.streak," days"]})]}),(0,l.jsxs)("div",{className:"insight-item",children:[(0,l.jsx)("h4",{children:"Completion Rate"}),(0,l.jsxs)("p",{className:"insight-value",children:[Math.round(g.history.filter((e=>e.completed)).length/g.history.length*100),"%"]})]}),(0,l.jsxs)("div",{className:"insight-item",children:[(0,l.jsx)("h4",{children:"Total Completions"}),(0,l.jsx)("p",{className:"insight-value",children:g.history.filter((e=>e.completed)).length})]})]}),(0,l.jsxs)("div",{className:"habit-history-chart",children:[(0,l.jsx)("h4",{children:"Recent Activity"}),(0,l.jsx)("div",{className:"history-bars",children:g.history.filter((e=>e.date.startsWith(d))).sort(((e,t)=>new Date(e.date)-new Date(t.date))).map((e=>(0,l.jsxs)("div",{className:"history-bar-container",title:"".concat(e.date,": ").concat(e.value," ").concat(g.unit),children:[(0,l.jsx)("div",{className:"history-bar ".concat(e.completed?"completed":""),style:{height:"".concat(e.value/g.target*100,"%"),backgroundColor:e.completed?g.color:"var(--glass-bg)"}}),(0,l.jsx)("div",{className:"history-date",children:new Date(e.date).getDate()})]},e.date)))})]})]})]})}}}]);
//# sourceMappingURL=732.cdafc84b.chunk.js.map