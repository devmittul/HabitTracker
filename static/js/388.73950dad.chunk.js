"use strict";(self.webpackChunkhabit_tracker=self.webpackChunkhabit_tracker||[]).push([[388],{388:(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var a=t(555),n=t(43),i=t(902),r=t(899);const c=(e,s)=>{const t=new Map(e.map((e=>[e.date,e])));return s.forEach((e=>{if(t.has(e.date)){const s=t.get(e.date);(e.completed&&!s.completed||e.value>(s.value||0))&&t.set(e.date,e)}else t.set(e.date,e)})),Array.from(t.values())};var l=t(104),o=t(579);const d=()=>{const{darkMode:e,toggleDarkMode:s}=(0,i.D)(),{habits:t,isLoaded:d}=(0,r.L)(),[h,m]=(0,n.useState)({notifications:!0,reminderTime:"20:00",achievementsEnabled:!0,exportData:!1,autoDelete:!1,autoDeleteDays:30}),[g,p]=(0,n.useState)({status:null,message:""}),u=(0,n.useRef)(null);(0,n.useEffect)((()=>{const e=localStorage.getItem("appSettings");e&&m(JSON.parse(e))}),[]),(0,n.useEffect)((()=>{localStorage.setItem("appSettings",JSON.stringify(h))}),[h]),(0,n.useEffect)((()=>{h.notifications&&(0,l.mT)()}),[h.notifications]);const x=e=>{const{name:s,value:t,type:n,checked:i}=e.target;m((e=>(0,a.A)((0,a.A)({},e),{},{[s]:"checkbox"===n?i:t})))};return(0,o.jsxs)("div",{className:"settings-container animate-in",children:[(0,o.jsx)("h2",{className:"page-title",children:"Settings"}),(0,o.jsxs)("div",{className:"glass-card settings-card",children:[(0,o.jsx)("h3",{children:"Appearance"}),(0,o.jsxs)("div",{className:"setting-item",children:[(0,o.jsxs)("div",{className:"setting-label",children:[(0,o.jsx)("span",{children:"Dark Mode"}),(0,o.jsx)("p",{className:"setting-description",children:"Switch between light and dark theme"})]}),(0,o.jsx)("div",{className:"setting-control",children:(0,o.jsxs)("label",{className:"toggle-switch",children:[(0,o.jsx)("input",{type:"checkbox",checked:e,onChange:s}),(0,o.jsx)("span",{className:"toggle-slider"})]})})]})]}),(0,o.jsxs)("div",{className:"glass-card settings-card",children:[(0,o.jsx)("h3",{children:"Notifications"}),(0,o.jsxs)("div",{className:"setting-item",children:[(0,o.jsxs)("div",{className:"setting-label",children:[(0,o.jsx)("span",{children:"Enable Notifications"}),(0,o.jsx)("p",{className:"setting-description",children:"Get reminders for your habits"})]}),(0,o.jsx)("div",{className:"setting-control",children:(0,o.jsxs)("label",{className:"toggle-switch",children:[(0,o.jsx)("input",{type:"checkbox",name:"notifications",checked:h.notifications,onChange:x}),(0,o.jsx)("span",{className:"toggle-slider"})]})})]}),h.notifications&&(0,o.jsxs)("div",{className:"setting-item",children:[(0,o.jsxs)("div",{className:"setting-label",children:[(0,o.jsx)("span",{children:"Reminder Time"}),(0,o.jsx)("p",{className:"setting-description",children:"When to send daily reminders"})]}),(0,o.jsx)("div",{className:"setting-control",children:(0,o.jsx)("input",{type:"time",name:"reminderTime",value:h.reminderTime,onChange:x})})]})]}),(0,o.jsxs)("div",{className:"glass-card settings-card",children:[(0,o.jsx)("h3",{children:"Achievements & Gamification"}),(0,o.jsxs)("div",{className:"setting-item",children:[(0,o.jsxs)("div",{className:"setting-label",children:[(0,o.jsx)("span",{children:"Enable Achievements"}),(0,o.jsx)("p",{className:"setting-description",children:"Earn badges for completing habits"})]}),(0,o.jsx)("div",{className:"setting-control",children:(0,o.jsxs)("label",{className:"toggle-switch",children:[(0,o.jsx)("input",{type:"checkbox",name:"achievementsEnabled",checked:h.achievementsEnabled,onChange:x}),(0,o.jsx)("span",{className:"toggle-slider"})]})})]})]}),(0,o.jsxs)("div",{className:"glass-card settings-card",children:[(0,o.jsx)("h3",{children:"Data Management"}),(0,o.jsxs)("div",{className:"setting-item",children:[(0,o.jsxs)("div",{className:"setting-label",children:[(0,o.jsx)("span",{children:"Export Data to Cloud"}),(0,o.jsx)("p",{className:"setting-description",children:"Sync your habits across devices"})]}),(0,o.jsx)("div",{className:"setting-control",children:(0,o.jsxs)("label",{className:"toggle-switch",children:[(0,o.jsx)("input",{type:"checkbox",name:"exportData",checked:h.exportData,onChange:x}),(0,o.jsx)("span",{className:"toggle-slider"})]})})]}),(0,o.jsxs)("div",{className:"setting-item",children:[(0,o.jsxs)("div",{className:"setting-label",children:[(0,o.jsx)("span",{children:"Auto-delete Old Data"}),(0,o.jsx)("p",{className:"setting-description",children:"Remove habit entries older than specified days"})]}),(0,o.jsx)("div",{className:"setting-control",children:(0,o.jsxs)("label",{className:"toggle-switch",children:[(0,o.jsx)("input",{type:"checkbox",name:"autoDelete",checked:h.autoDelete,onChange:x}),(0,o.jsx)("span",{className:"toggle-slider"})]})})]}),h.autoDelete&&(0,o.jsxs)("div",{className:"setting-item",children:[(0,o.jsxs)("div",{className:"setting-label",children:[(0,o.jsx)("span",{children:"Days to Keep"}),(0,o.jsx)("p",{className:"setting-description",children:"Number of days to keep habit data"})]}),(0,o.jsx)("div",{className:"setting-control",children:(0,o.jsx)("input",{type:"number",name:"autoDeleteDays",min:"7",max:"365",value:h.autoDeleteDays,onChange:x})})]}),(0,o.jsxs)("div",{className:"backup-restore-section",children:[(0,o.jsx)("h4",{children:"Backup and Restore"}),(0,o.jsx)("p",{className:"setting-description",children:"Save your habits data or restore from a backup file"}),(0,o.jsxs)("div",{className:"backup-restore-buttons",children:[(0,o.jsx)("button",{className:"btn btn-secondary",onClick:()=>{if(!d||0===t.length)return void p({status:"error",message:"No habits data to export"});const e=(e=>{try{const s={version:"1.0",exportDate:(new Date).toISOString(),data:e},t=JSON.stringify(s,null,2),a=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(a),i=document.createElement("a");return i.href=n,i.download="habit-tracker-backup-".concat((new Date).toISOString().slice(0,10),".json"),document.body.appendChild(i),i.click(),setTimeout((()=>{document.body.removeChild(i),URL.revokeObjectURL(n)}),100),{success:!0}}catch(s){return console.error("Error exporting data:",s),{success:!1,error:s}}})(t);var s;e.success?p({status:"success",message:"Data exported successfully"}):p({status:"error",message:"Failed to export data: "+((null===(s=e.error)||void 0===s?void 0:s.message)||"Unknown error")})},disabled:!d||0===t.length,children:"Export Data"}),(0,o.jsx)("button",{className:"btn btn-secondary",onClick:()=>{u.current.click()},children:"Import Data"}),(0,o.jsx)("input",{type:"file",ref:u,style:{display:"none"},accept:".json",onChange:async e=>{const s=e.target.files[0];if(s){try{p({status:"loading",message:"Importing data..."});const e=await(e=>new Promise(((s,t)=>{try{const a=new FileReader;a.onload=e=>{try{const a=JSON.parse(e.target.result);if(!a.data||!Array.isArray(a.data))return t({success:!1,error:"Invalid file format. Expected habits data array."});s({success:!0,data:a.data,metadata:{version:a.version,exportDate:a.exportDate}})}catch(a){t({success:!1,error:"Failed to parse JSON data."})}},a.onerror=()=>{t({success:!1,error:"Error reading file."})},a.readAsText(e)}catch(a){t({success:!1,error:"Error importing data."})}})))(s);if(e.success){const s=e.data,n=((e,s)=>{try{const t=new Map(e.map((e=>[e.id,e]))),n=[...e];return s.forEach((e=>{if(t.has(e.id)){const s=n.findIndex((s=>s.id===e.id));n[s]=(0,a.A)((0,a.A)((0,a.A)({},n[s]),e),{},{history:c(n[s].history||[],e.history||[])})}else n.push(e)})),{success:!0,data:n}}catch(t){return console.error("Error merging data:",t),{success:!1,error:t}}})(JSON.parse(localStorage.getItem("habits")||"[]"),s);var t;if(n.success)localStorage.setItem("habits",JSON.stringify(n.data)),p({status:"success",message:"Successfully imported ".concat(s.length," habits. Reload the app to see changes.")});else p({status:"error",message:"Error merging data: "+((null===(t=n.error)||void 0===t?void 0:t.message)||"Unknown error")})}else p({status:"error",message:e.error||"Failed to import data"})}catch(n){p({status:"error",message:"Error: "+(n.message||"Unknown error")})}e.target.value=""}}})]}),g.status&&(0,o.jsxs)("div",{className:"import-status ".concat(g.status),children:[(0,o.jsx)("p",{children:g.message}),"success"===g.status&&(0,o.jsx)("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:"Reload App"})]})]}),(0,o.jsxs)("div",{className:"setting-actions",children:[(0,o.jsx)("button",{className:"btn btn-secondary",onClick:()=>{window.confirm("Are you sure you want to reset all settings to default?")&&m({notifications:!0,reminderTime:"20:00",achievementsEnabled:!0,exportData:!1,autoDelete:!1,autoDeleteDays:30})},children:"Reset to Default"}),(0,o.jsx)("button",{className:"btn btn-primary",children:"Save Settings"})]})]}),(0,o.jsxs)("div",{className:"glass-card about-card",children:[(0,o.jsx)("h3",{children:"About"}),(0,o.jsx)("p",{children:"Habit Tracker v1.0.0"}),(0,o.jsx)("p",{children:"A beautiful habit tracking app with modern UI"}),(0,o.jsx)("p",{children:"\xa9 2025 Habit Tracker"})]})]})}}}]);
//# sourceMappingURL=388.73950dad.chunk.js.map